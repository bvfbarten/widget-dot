<html>
    <head>
	<title>test</title>
	<link rel="stylesheet" href="../css/pico.css">
    </head>
    <body>
	<div class="container">
	    <h1>
		Tests!
	    </h1>
	    <section>
		<div id="dropdown-output" data-widget-template-id="#dropdown-template" data-widget-functions='{
		    "filteredItems": function() { 
				   return this.items.filter( i => i.startsWith(this.search)); 
				   }
		    }' data-widget-data='{"search":"", "items": ["test", "foo", "bar", "baz"]}'></div>
		<script id="dropdown-template" type="text/html" >
		    <div>
			<div class="container">
			    <input type="text" value="{%= self.search %}" onkeyup="{%= self %}.search = this.value">
			    <ul>
			    {%  for (var i in self.filteredItems()) { %}
			        <li> {%= self.filteredItems()[i] %}</li>
			    {%  } %}
			    </ul>
			</div>
		    </div>
		</script>
		<script>
			function update() {
				console.log('updating');
				console.log(document.querySelector('#dropdown-output'));
				document.querySelector('#dropdown-output').dataset['widgetData'] = '{"items": ["bob", "boo", "Dylan"]}';
				console.log('updated');
			}
		</script>
		<button onclick="update();">Change List</button>
	    </section>
	</div>
	<script src="../../dist/widget-dot.js" auto></script>
    </body>

</html>

